<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE language SYSTEM "language.dtd" [
<!ENTITY identrx "[a-zA-Z_][a-zA-Z0-9_]*">
<!ENTITY breakerregex "\s\+\-\*\/\.\&quot;\&apos;@#\&lt;\&gt;\^\&amp;\|\\\!=\?\&#37;\(\)\[\]\{\}\$\,$\;">
]> 
<!-- Place in $HOME/.local/share/org.kde.syntax-highlighting/syntax/ folder -->
<language name="Gorgon Script" version="1.00" kateversion="3.5" casesensitive="false" 
		  section="Sources" extensions="*.gs; *.gsp" author="Cem Kalyoncu" license="CC-0"
		  indentation="normal">
	<highlighting>
		<list name="keywords">
			<item>static</item>
			<item>const</item>
			<item>unset</item>
			<item>source</item>
			<item>ref</item>
			<item>echo</item>
			<item>return</item>
			<item>using</item>
			<item>break</item>
			<item>continue</item>
		</list>
		
		<list name="functions">
			<item>print</item>
			<item>varinfo</item>
		</list>
		<contexts>
			<context attribute="Error" lineEndContext="#stay" name="outsidectx">
				<!-- Scoped keywords -->
				<RegExpr attribute="Keyword" context="whilecondctx" String="\b(while)\b" beginRegion="whilereg" />
				
				<RegExpr attribute="Keyword" context="forvnamectx" String="\b(for)\b" beginRegion="forreg" />
								
				<RegExpr attribute="Keyword" context="ifcondctx" String="\b(if)\b" beginRegion="ifreg" />
				
				<RegExpr attribute="Keyword" context="functionnamectx" String="\b(function)\b" beginRegion="functionreg" />
				
				<RegExpr attribute="Keyword" context="methodnamectx" String="\b(method)\b" beginRegion="methodreg" />
				
				<!-- Special keywords -->
				<RegExpr attribute="Keyword" context="#stay" String="const\b" />
				<RegExpr attribute="Keyword" context="#stay" String="static\b" />
				<RegExpr attribute="Keyword" context="#stay" String="ref\b" />
				
				<!-- Line end and spacing -->
				<DetectChar attribute="Normal Text" context="#stay" char=";" />
				<DetectSpaces attribute="Normal Text" context="#stay" />
				
				<!--Comments-->
				<DetectChar context="singlecommentctx" char="#" />
				
				<!-- Other keywords and built-in functions -->
				<keyword attribute="Keyword" context="assignctx" String="keywords" />
				
				<keyword attribute="Function" context="assignctx" String="functions">
					<DetectChar char="(" />
				</keyword>
				
				<!-- Acceptable expressions -->
				<RegExpr attribute="Assignment" context="assignctx" String="\b&identrx;(\.&identrx;)*\s*(\+|\-|\*|\/)?=" />
				<RegExpr attribute="Normal Text" context="functionctx" String="\b&identrx;((:&identrx;)|(\.&identrx;))*\s*\(" />
			</context>
			
			<context attribute="Normal Text" lineEndContext="#pop" name="normalctx">
				<!-- Also handles ()'s -->
				<DetectChar attribute="Normal Text" context="functionctx" char="(" />
				<DetectChar attribute="Normal Text" context="indexctx" char="[" />
				<DetectChar attribute="Normal Text" context="constctx" char="{" />
				
				<!--Comments-->
				<DetectChar context="singlecommentctx" char="#" />
				
				<!--Strings-->
				<DetectChar context="doublestringctx" char="&quot;" />
				<DetectChar context="singlestringctx" char="&apos;" />
				
				<!--Numbers-->
				<Float attribute="Number" context="numericsuffixctx" />
				<Int attribute="Number" context="numericsuffixctx" />
			</context>
			
			<context attribute="Normal Text" lineEndContext="#stay" name="functionctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Error" context="#stay" char=";" />
				<DetectChar attribute="Normal Text" context="#pop" char=")" />
			</context>
			
			<context attribute="Normal Text" lineEndContext="#stay" name="indexctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Error" context="#stay" char=";" />
				<DetectChar attribute="Normal Text" context="#pop" char="]" />
			</context>
			
			<context attribute="Normal Text" lineEndContext="#stay" name="constctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Error" context="#stay" char=";" />
				<DetectChar attribute="Normal Text" context="#pop" char="}" />
			</context>
			
			<context attribute="Normal Text" lineEndContext="#pop" name="assignctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Normal Text" context="#pop" char=";" />
			</context>
			
			<!--Scoped keywords-->
			<context attribute="Normal Text" lineEndContext="whilectx" name="whilecondctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Normal Text" context="whilectx" char=";" />
			</context>
			
			<context attribute="Error" lineEndContext="#stay" name="whilectx">
				<IncludeRules context="outsidectx" />
				
				<RegExpr attribute="Keyword" context="end3ctx" String="(^|\b)(end)(\s+while)?" endRegion="whilereg" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop" name="forvnamectx">
				<RegExpr attribute="Normal Text" context="forinctx" String="\s*&identrx;\s*" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop" name="forinctx">
				<RegExpr attribute="Keyword" context="forlistctx" String="\bin\b" />
			</context>
			
			<context attribute="Normal Text" lineEndContext="forctx" name="forlistctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Normal Text" context="forctx" char=";" />
			</context>
			
			<context attribute="Error" lineEndContext="#stay" name="forctx">
				<IncludeRules context="outsidectx" />
				
				<RegExpr attribute="Keyword" context="end5ctx" String="(^|\b)(end)(\s+for)?" endRegion="forreg" />
			</context>
			
			
			
			<context attribute="Normal Text" lineEndContext="ifctx" name="ifcondctx">
				<IncludeRules context="normalctx" />
				
				<DetectChar attribute="Normal Text" context="ifctx" char=";" />
			</context>
			
			<context attribute="Error" lineEndContext="#stay" name="ifctx">
				<IncludeRules context="outsidectx" />
				
				<RegExpr attribute="Keyword" context="assignctx" String="(^|\b)elseif" />
				
				<RegExpr attribute="Keyword" context="elsectx" String="(^|\b)else($|;)" />
				
				<RegExpr attribute="Keyword" context="end3ctx" String="(^|\b)(end)(\s+if)?" endRegion="ifreg" />
			</context>
				
			<context attribute="Error" lineEndContext="#stay" name="elsectx">
				<IncludeRules context="outsidectx" />
				
				<RegExpr attribute="Keyword" context="end4ctx" String="(^|\b)(end)(\s+if)?" endRegion="ifreg" />
			</context>
					
					
			<context attribute="Error" lineEndContext="#pop" name="functionnamectx">
				<RegExpr attribute="Function" context="functionpopenctx" String="&identrx;" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
					
			<context attribute="Error" lineEndContext="#pop" name="functionpopenctx">
				<StringDetect attribute="Normal Text" context="functionparctx" String="(" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
						
			<context attribute="Error" lineEndContext="#stay" name="functionparctx">
				<DetectChar attribute="Normal Text" context="functionreturncheckctx" char=")" />
				
				<RegExpr attribute="Assignment" context="parctx" String="&identrx;" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#stay" name="parctx">
				<StringDetect attribute="Keyword" context="parasctx" String="as" />
				
				<DetectChar attribute="Normal Text" lookAhead="true" context="#pop" char=")" />
				<DetectChar attribute="Normal Text" context="#pop" char="," />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
						
			<context attribute="Error" lineEndContext="#stay" name="parasctx">
				<RegExpr attribute="Data Types" context="paraftertypectx" String="(((const\s+ref)|const|ref)\s+)?(([abd-zABD-Z_][a-zA-Z0-9_]*)|(?!const))(:&identrx;)?" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#stay" name="paraftertypectx">
				<RegExpr attribute="Keyword" context="functionctx" String="oneof\s*\(" />
				
				<DetectChar attribute="Normal Text" lookAhead="true" context="#pop#pop#pop" char=")" />
				<DetectChar attribute="Normal Text" context="#pop#pop#pop" char="," />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="functiondefctx" name="functionreturncheckctx">
				<StringDetect attribute="Keyword" context="functionreturnctx" String="returns" />
				
				<DetectChar attribute="Normal Text" context="functiondefctx" char=";" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop" name="functionreturnctx">
				
				<RegExpr attribute="Data Types" context="#pop" String="(((const\s+ref)|const|ref)\s+)?(([abd-zABD-Z_][a-zA-Z0-9_]*)|(?!const))(:&identrx;)?">
					<RegExpr attribute="Normal Text" lookAhead="true" String="\s*\;" />
				</RegExpr>
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
						
			<context attribute="Error" lineEndContext="#stay" name="functiondefctx">
				<IncludeRules context="outsidectx" />
				
				<RegExpr attribute="Keyword" context="end5ctx" String="(^|\b)(end)(\s+function)?" endRegion="functionreg" />
			</context>
							
			<context attribute="Error" lineEndContext="#pop" name="methodnamectx">
				<RegExpr attribute="Function" context="methodpopenctx" String="&identrx;" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="methodnoparctx" name="methodpopenctx">
				<DetectSpaces attribute="Normal Text" context="#stay" />
				
				<StringDetect attribute="Normal Text" context="methodparctx" String="(" />
				
				<RegExpr lookAhead="true" context="methodnoparctx" String="." />
			</context>
			
			<context attribute="Error" lineEndContext="methodctx" name="methodnoparctx">
				<RegExpr lookAhead="true" context="methodctx" String="." />
			</context>
			
			<context attribute="Error" lineEndContext="#stay" name="methodparctx">
				<DetectChar attribute="Normal Text" context="methodctx" char=")" />
				
				<RegExpr attribute="Assignment" context="parctx" String="&identrx;" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop" name="methodparctx">
				<DetectChar attribute="Normal Text" context="methodctx" char=")" />
				
				<RegExpr attribute="Assignment" context="parctx" String="&identrx;" />
				
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
							
			<context attribute="Error" lineEndContext="#stay" name="methodctx">
				<IncludeRules context="outsidectx" />
				
				<RegExpr attribute="Keyword" context="end4ctx" String="(^|\b)(end)(\s+method)?" endRegion="methodreg" />
			</context>
				
			<context attribute="Error" lineEndContext="#pop#pop#pop" name="end3ctx">
				<DetectChar attribute="Normal Text" context="#pop#pop#pop" char=";" />
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop#pop#pop#pop" name="end4ctx">
				<DetectChar attribute="Normal Text" context="#pop#pop#pop#pop" char=";" />
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop#pop#pop#pop#pop" name="end5ctx">
				<DetectChar attribute="Normal Text" context="#pop#pop#pop#pop#pop" char=";" />
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<context attribute="Error" lineEndContext="#pop" name="end1ctx">
				<DetectChar attribute="Normal Text" context="#pop" char=";" />
				<DetectSpaces attribute="Normal Text" context="#stay" />
			</context>
			
			<!--Strings-->
			<context attribute="String" lineEndContext="#stay" name="doublestringctx">
				<DetectChar attribute="String" context="stringsuffixctx" char="&quot;" />
				<DetectChar attribute="Char" context="escapectx" char="\" />
			</context>
			
			<context attribute="String" lineEndContext="#stay" name="singlestringctx">
				<DetectChar attribute="String" context="stringsuffixctx" char="&apos;" />
				<DetectChar attribute="Char" context="escapectx" char="\" />
			</context>
			
			<!--Escape-->
			<context attribute="Error" lineEndContext="#stay" name="escapectx">
				<AnyChar attribute="Char" context="#pop" String="&apos;&quot;\nt" />
				<AnyChar attribute="Char" context="escape2ctx" String="0123456789abcdef" insensitive="true" />
				<RegExpr attribute="Error" context="#pop#pop" String="." />
			</context>
			
			<!--Escape-->
			<context attribute="Error" lineEndContext="#stay" name="escape2ctx">
				<AnyChar attribute="Char" context="#pop#pop" String="0123456789abcdef" insensitive="true" />
				<RegExpr attribute="Error" context="#pop#pop" String="." />
			</context>
			
			
			<!--String suffixes-->
			<context attribute="Error" lineEndContext="#pop#pop" name="stringsuffixctx">
				<AnyChar attribute="Char" context="#pop#pop" String="sc">
					<RegExpr lookAhead="true" String="([&breakerregex;$]|$)" />
				</AnyChar>
				
				<RegExpr lookAhead="true" context="#pop#pop" String="([&breakerregex;$]|$)" />
			</context>
				
			<!--Numeric suffixes-->
			<context attribute="Error" lineEndContext="#pop" name="numericsuffixctx">
				<AnyChar attribute="Char" context="#pop" String="iufdcnbs">
					<RegExpr lookAhead="true" String="([&breakerregex;$]|$)" />
				</AnyChar>
				
				<RegExpr context="#pop" lookAhead="true" String="([&breakerregex;$]|$)" />
			</context>
								
			<!--Comments-->
			<context attribute="Comment" lineEndContext="#pop" name="singlecommentctx">
				<keyword attribute="Region Marker" context="#stay" String="todo:" />
			</context>
		</contexts>
							
		<itemDatas>
			<itemData name="Normal Text" defStyleNum="dsNormal"/>
			<itemData name="Keyword" defStyleNum="dsKeyword"/>
			<itemData name="Function" defStyleNum="dsFunction"/>
			<itemData name="Data Types" defStyleNum="dsDataType"/>
			<itemData name="Assignment" defStyleNum="dsOthers"/>
			<itemData name="Number" defStyleNum="dsDecVal"/>
			<itemData name="String" defStyleNum="dsString"/>
			<itemData name="Comment" defStyleNum="dsComment"/>
			<itemData name="Region Marker " defStyleNum="dsRegionMarker"/>
			<itemData name="Preprocessor" defStyleNum="dsPreProc"/>
			<itemData name="Alert" defStyleNum="dsAlert"/>
			<itemData name="Error" defStyleNum="dsError"/>
			<itemData name="Other" defStyleNum="dsOther"/>
			<itemData name="Char"  defStyleNum="dsChar"/>
		</itemDatas>
	</highlighting>
	
	<general>
		<comments>
			<comment name="singleLine" start="#" />
		</comments>
		<keywords casesensitive="false" weakDeliminator=":" additionalDeliminator="@#$" />
	</general>
</language>
